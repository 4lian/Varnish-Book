digraph G{
	subgraph clusterfrontend{
		label="Frontend (From Client) Workthread";
		subgraph clusterbackend {
			label="Backend (To Server) Workthread";
			decision1 [shape=diamond,label="if (conditions(beresp))"];
			vcl_backend_fetch -> decision1;
			decision1 -> vcl_backend_response [label="true"];
			decision1 -> vcl_backend_error [label="false"];
		//	decision3 [shape=diamond];
		//	vcl_backend_response -> decision3[label="retry"];
		//	vcl_backend_error -> decision2 [label="retry"];
		}
			vcl_backend_fetch -> vcl_synth [label="abandon"];
		vcl_backend_response -> vcl_synth [label="abandon"];
		//retry1[shape=plaintext,label="retry"] 
		//decision2 [shape=diamond];
		//decision2 -> vcl_synth [label=">max"];
		//retry2[shape=plaintext,label="retry"]
		//decision2 -> retry1 [label="<=max"];
		//decision3 -> retry2 [label="<=max"];
		//decision3 -> vcl_synth [label=">max"];
		vcl_backend_error -> vcl_deliver;
		vcl_backend_response -> vcl_deliver;
	}
}
